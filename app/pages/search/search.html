
<ion-header>
  <ion-navbar>
  <ion-searchbar [(ngModel)]='searchQuery' (ionInput)="searchItemsImputed()" class="searchbar" autofocus></ion-searchbar>
</ion-navbar></ion-header>

<ion-content padding class="search" >

  <ion-list *ngIf="items.length == 0" >
    <ion-item *ngFor="let facet of facets" (click)="goto(facet.key, facet.value)">
      <ion-icon name="folder" item-left ></ion-icon>
        {{facet.value}}
    </ion-item>
  </ion-list>

  <ion-list *ngIf="items.length > 0">
    <ion-item *ngFor="let item of items" >
      <div (click)="open(item, $event)">
        <ion-thumbnail item-left>
          <img  *ngIf="item.has_image == 0" src="build/images/oMarks_400x400.png"/>
          <img  *ngIf="item.has_image == 1" src="{{item.image.src}}"/>
        </ion-thumbnail>
        <h2>{{item.given_title}}</h2>
        <p>{{item.excerpt}}</p>
      </div>
      <button primary clear item-right *ngIf="item.favorite == 1"  (click)="remove_star(item)">
        <ion-icon name="md-star"></ion-icon>
      </button>
      <button primary clear item-right *ngIf="item.favorite != 1"  (click)="add_star(item)">
        <ion-icon name="star-outline"></ion-icon>
      </button>
      <button primary clear item-right  (click)="edit(item)">
        <ion-icon name="create"></ion-icon>
      </button>
      <button clear primary item-right (click)="editCode(item)">
        <ion-icon name="code"></ion-icon>
      </button>
      <button clear primary item-right (click)="delete(item)">
        <ion-icon name="trash"></ion-icon>
      </button>
    </ion-item>
  </ion-list>

  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
